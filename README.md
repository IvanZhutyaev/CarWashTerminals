# CarWashTerminals

**CarWashTerminals** — это программный комплекс для управления терминалами самообслуживания автомоек. Проект реализован с использованием C++ (Qt/QML) и поддерживает работу с базами данных PostgreSQL и SQLite, а также интеграцию с YooKassa и генерацию QR-кодов.

## Основные возможности

- Регистрация и авторизация пользователей по номеру телефона
- Управление балансом пользователя и пополнение через терминал
- Синхронизация данных между локальной и центральной БД
- История пополнений и операций
- Интеграция с YooKassa для онлайн-платежей
- Генерация QR-кодов для оплаты
- Современный интерфейс на QML с поддержкой Material Design
- Работа с двумя типами БД: PostgreSQL (центральная) и SQLite (локальная)
- Адаптация под сенсорные терминалы (фуллскрин, крупные элементы)

## Структура проекта

- `IPS4MCO/` — основной исходный код приложения (C++/QML)
  - `accountmanager/` — управление пользователями, регистрация, авторизация, история пополнений
  - `db_manager/`, `engine/`, `controller/`, `pilotnt/` — вспомогательные модули
  - `qml/` — QML-компоненты интерфейса (экраны, кнопки, формы)
  - `images/`, `fonts/` — ресурсы для интерфейса
- `config_manager/` — модуль для работы с конфигурациями и типами данных
- `qt-qrcode/` — библиотека для генерации QR-кодов (C++/QML)
- `audio/` — звуковые файлы для терминала
- `config/` — конфигурационные файлы (цвета, UI, modbus)
- `build-*/` — каталоги сборки (автоматически создаются при компиляции)

## Быстрый старт

1. **Требования:**
   - Qt 6.9+ (Qt Quick, Qt SQL, Qt Network)
   - CMake или qmake
   - PostgreSQL сервер (для центральной БД)
   - Компилятор C++17+

2. **Сборка:**
   - Откройте проект `IPS4MCO.pro` в Qt Creator или используйте qmake:
     ```
     qmake IPS4MCO.pro
     make
     ```
   - Для сборки QR-библиотеки используйте проект в `qt-qrcode/`.

3. **Запуск:**
   - Запустите собранный бинарник.
   - Для работы с центральной БД укажите параметры подключения в `accountmanager.cpp` (host, user, password, dbname).
   - Для тестирования можно использовать только SQLite (локально).

4. **Настройка:**
   - Измените конфиги в папке `config/` под свои нужды.
   - Для интеграции с YooKassa укажите свои ShopId и SecretKey в `main.cpp`.

## Основные файлы

- `IPS4MCO/main.cpp` — точка входа, инициализация движка, QML, провайдеров
- `IPS4MCO/main.qml` — главное QML-окно, навигация по экранам
- `IPS4MCO/accountmanager/accountmanager.cpp` — логика пользователей и баланса
- `qt-qrcode/` — генерация QR-кодов для оплаты

## Лицензия

Проект распространяется под лицензией MIT. Подробнее см. файл `LICENSE`.